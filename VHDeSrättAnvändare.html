<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="VHDeS.css">
    <title>Document</title>
</head>
<body class="rätt"> <!--nästan allt här är för css-->
        <h2 id="welcome"></h2>
        <div class="flex">
        <img class="img" src="elspark.avif" alt="">
        <button id="hyra">Hyr en elsparkcykel i 1h</button>
        <div class="box1">
        <p id="text"></p>
        <p id="teht"></p>
        </div>
    </div>
    <script>
        const params = new URLSearchParams(window.location.search); //tror att den söker för användarnamn från länken username
        const welcome = document.getElementById("welcome");
        let username = params.get('username'); //lägger den username från länken den nya username som skrivs ut sen
        if(username){
            welcome.textContent = `Välkommen ${username}!`;//skriver ut hälkommen osen username
        }
        let tid = 60;
        const knapp = document.getElementById('hyra');
        const text = document.getElementById('text');
        const teht = document.getElementById("teht");
        let timerId = null;
        let rented = false;

        teht.textContent = tid + " min";
        knapp.addEventListener('click', function (event) {
            if (!rented) {
                rented = true;
                text.textContent = "Du hyr en elsparkcykel!";
                text.style.color = "green";

                timerId = setInterval(function () {
                    if (tid > 0) {
                        tid--;
                        teht.textContent = tid + " min";
                    }
                    if (tid === 0) {
                        clearInterval(timerId);
                        timerId = null;
                        rented = false;
                        text.textContent = "Tiden är slut";
                        text.style.color = "red";
                        tid = 60;
                        teht.textContent = tid + " min";
                    }
                }, 60000);
            } else {
                rented = false;
                text.textContent = "Du har lämnat tillbaka elsparkcykeln!";
                text.style.color = "red";
                if (timerId) {
                    clearInterval(timerId);
                    timerId = null;
                }
                teht.textContent = tid;
            }
        });
    </script>
</body>
</html> 